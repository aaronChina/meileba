!function(){var t=function(){this.access_token=localStorage.access_token||!1};t.prototype.init=function(){}}(),function(){var t=function(){this.host="http://api.mlb.kfw001.com",this.md5="kfw001_com"};t.prototype.sendEvent=function(t,e){return!!t&&(e=e?e:"",void api.sendEvent({name:t,extra:e}))},t.prototype.listenerEvent=function(t,e){return!!t&&(e="function"==typeof e?e:function(){},void api.addEventListener({name:t},function(t){e(t.value)}))},t.prototype.statusSize=function(){var t=0,e=api.systemType,n=api.systemVersion;if("ios"==e){var o=parseInt(n,10),a=api.fullScreen,i=api.iOS7StatusBarAppearance;o>=7&&!a&&i&&(t=20)}return"android"==e&&(n=parseFloat(n),n>=4.4)?t=20:t},t.prototype.switchPageIndex=function(t,e,n){return!!t&&(e="number"==typeof e?e:0,void api.setFrameGroupIndex({name:t,index:e,scroll:n||!1}))},t.prototype.hidePageGroup=function(t){return!!t&&void api.setFrameGroupAttr({name:t,hidden:!0})},t.prototype.toast=function(t,e,n){return!!t&&void api.toast({msg:t,duration:e||2e3,location:n||"bottom"})},t.prototype.closeWin=function(t,e,n){return t?void api.closeWin({name:t}):api.closeWin()},$.api=new t}($||($={})),function(){$.ajax=function(t){return"object"==typeof t&&t.url?(t=$.extend({},{url:"",method:"post",data:{},dataType:"json",timeout:5,cache:!0,success:function(){},error:function(){}},t),void api.ajax({url:$.api.host+t.url,method:t.method,dataType:t.dataType,cache:t.cache,timeout:5,data:{values:t.data}},function(e,n){return n?t.error(n):void t.success(e)})):$.api.toast("参数错误")}}(),function(){var t=function(){};return t.prototype.swipe=function(){var t=new Swipe($(".js-slider")[0],{startSlide:0,speed:400,auto:3e3,continuous:!0,disableScroll:!1,stopPropagation:!1,callback:function(t,e){var n=$(e).siblings().length+1;t||(t=n),$(".js-banner-bar").width(t*(100/n)+"%")}});return t},t.prototype.call=function(t){confirm("是否拨打电话？","确定致电： "+t+" ?",function(e){return!!e&&void api.call({type:"tel",number:t})})},t.prototype.openStoreWin=function(t){t=t?t:{},api.openWin({name:"store",url:"widget://html/beauty/index.html",bgColor:"#e65c7c",reload:"true",pageParam:{id:t}})},t.prototype.openUrlWin=function(t){api.openWin({name:"urlWin",url:"widget://html/win/url.html",bgColor:"#e65c7c",reload:"true",pageParam:{url:t}})},t.prototype.openUrlFrame=function(t){api.openFrame({name:"urlFrame",url:t,rect:{marginTop:$.api.statusSize(),marginLeft:0,marginRight:0,marginBottom:0},bounces:!1,vScrollBarEnabled:!1,hScrollBarEnabled:!1,bgColor:"#f2f2f2",pageParam:{}})},t.prototype.openStoreHeadFrame=function(t){api.openFrame({name:"storeHeader",url:"widget://html/beauty/store.html",rect:{marginTop:$.api.statusSize(),marginLeft:0,marginRight:0,marginBottom:0},bounces:!1,vScrollBarEnabled:!1,hScrollBarEnabled:!1,bgColor:"#f2f2f2"})},t.prototype.openDetailsHomeWin=function(){api.openWin({name:"detailsWin",url:"widget://html/details/index.html",bgColor:"#e65c7c",reload:"true",pageParam:{id:1}})},t.prototype.openDetailsHomeFrame=function(){api.openFrame({name:"detailsHome",url:"widget://html/details/details.html",rect:{marginTop:$.api.statusSize(),marginLeft:0,marginRight:0,marginBottom:0},bounces:!1,vScrollBarEnabled:!1,hScrollBarEnabled:!1,bgColor:"#f2f2f2"})},t.prototype.openScannerWin=function(){api.openWin({name:"scannerWin",url:"widget://html/win/scanner.html",bgColor:"#e65c7c",reload:!1})},t.prototype.openScannerFrame=function(){api.openFrame({name:"scannerFrame",url:"widget://html/scanner/index.html",rect:{marginTop:$.api.statusSize(),marginLeft:0,marginRight:0,marginBottom:0},bounces:!1,vScrollBarEnabled:!1,hScrollBarEnabled:!1,bgColor:"widget://images/scanner.png"})},t.prototype.openFNScanner=function(){var t=this,e=api.require("FNScanner");e.closeView(),e.openView({rect:{x:0,y:$.api.statusSize()}},function(e,n){return n?alert(JSON.stringify(n)):void setTimeout(function(){t.openScannerFrame()},10)})},t.prototype.switchLight=function(t){var e=t?"on":"off";e=e?"off":"on",alert(e);var n=api.require("FNScanner");n.switchLight({status:e})},t.prototype.closeWin=function(){$.api.closeWin()},t.prototype.openCoinDetails=function(){api.openWin({name:"coin-win",url:"widget://html/coinShop/coin-win.html",bgColor:"#e65c7c",reload:"true"})},t.prototype.openCoinOrderDetails=function(){api.openWin({name:"order-farme",url:"widget://html/coinShop/order-win.html",bgColor:"#e65c7c",reload:"true"})},t.prototype.openCoinDetailsFrame=function(){api.openFrame({name:"CoinDetailsFrame",url:"widget://html/coinShop/my-coin.html",rect:{marginTop:$.api.statusSize(),marginLeft:0,marginRight:0,marginBottom:0},bounces:!1,vScrollBarEnabled:!1,hScrollBarEnabled:!1,bgColor:"#f2f2f2"})},t.prototype.openCoinOrderDetailsFrame=function(){api.openFrame({name:"CoinOrderDetailsFrame",url:"widget://html/coinShop/my-coin-order.html",rect:{marginTop:$.api.statusSize(),marginLeft:0,marginRight:0,marginBottom:0},bounces:!1,vScrollBarEnabled:!1,hScrollBarEnabled:!1,bgColor:"#f2f2f2"})},t.prototype["switch"]=function(t,e,n){var o=this;switch(t){case"call":o.call(e);break;case"bbsSwitchGroup":console.log(e),$.bbs().sendEvent(e||0);break;case"openStoreWin":o.openStoreWin(e);break;case"openUrl":o.openUrlWin(e);break;case"openDetailsHome":o.openDetailsHomeWin(e);break;case"closeWin":o.closeWin(e);break;case"openScanner":o.openScannerWin();break;case"switchLight":o.switchLight(e);break;case"openCoinDetails":o.openCoinDetails();break;case"openCoinOrderDetails":o.openCoinOrderDetails();break;case"switchMyCoin":$.myCoin().switchMyCoin(e);break;case"deleteOrder":$.coinOrder().deleteOrder(e);break;case"traceOrder":$.coinOrder().traceOrder(e)}},$.app=new t}($||($={})),~function(){var t=function(){this.nav=$(".nav-item"),this.navGroup=$('[data-selector="nav"]'),this.title=$('[data-selector="title"]')};t.prototype.switchNav=function(){var t=this;$.api.listenerEvent("bbsSwitchNav",function(e){t.switchNavItem(e.index)})},t.prototype.switchNavItem=function(t){var e=this,n=e.navGroup.eq(0).find(".nav-item").length;e.nav.removeClass("active").eq(t).addClass("active"),e.navGroup.removeClass("show"),e.title.removeClass("active"),t=Math.floor(t/n),e.navGroup.eq(t).addClass("show"),e.title.eq(t).addClass("active")},t.prototype.sendEvent=function(t){$.api.sendEvent("bbsSwitchGroup",{index:t})},$.bbs=function(){return new t}}(),~function(){var t=function(){this.bMap,this.lon,this.lat};t.prototype.init=function(){var t=this;t.bMap=api.require("bMap")},t.prototype.getLocation=function(t){t="function"==typeof t?t:function(){};var e=this;e.bMap.getLocation({accuracy:"100m",autoStop:!0,filter:1},function(n,o){return o?e.error(o):n.status?(e.lon=n.lon,e.lat=n.lat,void t({lon:n.lon,lat:n.lat})):$.api.toast("定位出错，请手动选择地区")})},t.prototype.getNameFromCoords=function(t,e){e="function"==typeof e?e:function(){};var n=this;n.bMap.getNameFromCoords({lon:t.lon,lat:t.lat},function(t,o){return o?n.error(o):t.status?(n.lon=t.lon,n.lat=t.lat,void e({city:t.city,address:t.address,lat:n.lat,lon:n.lon})):$.api.toast("定位出错，请手动选择地区")})},t.prototype.name=function(t){t="function"==typeof t?t:function(){};var e=this;e.getLocation(function(n){e.getNameFromCoords(n,t)})},t.prototype.error=function(t){if("object"!=typeof t)return $.api.toast("error:"+t);switch(t.code){case"0":$.api.toast("error:"+t.msg);break;case"1":$.api.toast("error:"+(t.msg||"检索词有岐义"));break;case"2":$.api.toast("error:"+(t.msg||"检索地址有岐义"));break;case"3":$.api.toast("error:"+(t.msg||"没有找到检索结果"));break;case"4":$.api.toast("error:"+(t.msg||"key错误"));break;case"5":$.api.toast("error:"+(t.msg||"网络连接错误"));break;case"6":$.api.toast("error:"+(t.msg||"网络连接超时"));break;case"7":$.api.toast("error:"+(t.msg||"还未完成鉴权，请在鉴权通过后重试"));break;default:$.api.toast("error:"+(t.msg||"未知错误"))}},$.bMap=new t}(),function(){var t=function(){};return t.prototype.setItme=function(t,e,n){var n=n||28800,o=parseInt((new Date).getTime()/1e3)+n;try{var a="object"==typeof e?JSON.stringify(e):e;localStorage.setItem(t,a),localStorage.setItem(t+"time",o)}catch(i){"QuotaExceededError"==i.name&&(localStorage.clear(),localStorage.setItem(t,e),localStorage.setItem(t+"time",o))}},t.prototype.getItme=function(t){var e=parseInt(localStorage.getItem(t+"time")),n=parseInt((new Date).getTime()/1e3);if(e>=n){var o=localStorage.getItem(t);return JSON.parse(o)}return localStorage.removeItem(t),""},t.prototype.removeItem=function(t){localStorage.removeItem(t)},t.prototype.clear=function(){localStorage.clear()},$.cache=new t}($||($={})),~function(){var t=function(){};t.prototype.init=function(){},t.prototype.deleteOrder=function(t){confirm("确定删除此订单？","注意：删除后无法恢复",function(e){$('[data-id="'+t+'"]').remove(),$.api.toast("删除成功")})},t.prototype.traceOrder=function(t){api.openWin({name:"chase-win",url:"widget://html/coinShop/chase-win.html",bgColor:"#e65c7c",reload:"true",pageParam:{id:t}})},t.prototype.openChaseLists=function(){api.openFrame({name:"orderChaseFrame",url:"widget://html/coinShop/order-chase.html",rect:{marginTop:$.api.statusSize(),marginLeft:0,marginRight:0,marginBottom:0},bounces:!1,vScrollBarEnabled:!1,hScrollBarEnabled:!1,bgColor:"#f2f2f2"})},$.coinOrder=function(){return new t}}(),function(){var t=function(){this.alias={ads:{fn:"bannerHtml",url:"/ads/index/index"},brands:{fn:"brandsHtml",url:"/ads/index/index"},bill:{fn:"billHtml",url:"/ads/index/index"},shop:{fn:"listHtml",url:"/shop/index/index"}},this.shopid=0};return t.prototype.exec=function(t,e,n,o,a){var i=this.alias[t]||null,r=this[i.fn]||function(t,e){};if(i){var s={url:i.url,data:e||{},exptime:o||100,cache:a||!1,success:function(t){r(t,n)},error:function(t){n()}};$.request.getData(s)}},t.prototype.bannerHtml=function(t,e){if(e="function"==typeof e?e:function(){},100==t.status){var n=t.data.info,o="";if(n){for(var a in n)o+='<div class="banner-item" style="background-image: url(',o+=n[a].thumb,o+=')" data-event="openUrl" data-params="https://baidu.com"></div>',o+='<div class="banner-item" style="background-image: url(../images/home-index-banner.jpg)" data-event="openUrl" data-params="https://baidu.com"></div>';o&&($(".banner-group").html(o),e())}}},t.prototype.brandsHtml=function(t,e){if(e="function"==typeof e?e:function(){},100==t.status){var n=t.data.info,o="";if(n){for(var a in n)o+="<div class='brands-item'>",o+="<img src='"+n[a].thumb+"'/>",o+="</div>";o&&($(".brands-group").html(o),e())}}},t.prototype.billHtml=function(t,e){if(e="function"==typeof e?e:function(){},100==t.status){var n=t.data.info,o="";if(n){for(var a in n)o+='<div class="bill-item">',o+='<div class="bill-title">'+n[a].name+"</div>",o+='<div class="bill-context"><img src="'+n[a].thumb+'" /></div>',o+="</div>";o&&($(".bill-group").html(o),e())}}},t.prototype.listHtml=function(t,e){if(e="function"==typeof e?e:function(){},100==t.status){var n=t.data.info,o="";if(n){for(var a in n){$.cache.setItme("shopid",n[a].id),o+='<div class="list-item" data-event="openStoreWin" data-params="'+n[a].id+'">',o+=n[a].thumb?"<div class='list-item-left'><img src='"+n[a].thumb+"' /></div>":'<div class="list-item-left"><img src="../images/home-beauty.jpg" /></div>',o+='<div class="list-item-right">',o+='<div class="list-item-title">',o+="<p>"+n[a].name+"</p>";var i=n[a].tips||null;if(i){o+='<div class="tips-group">';for(var r in i)o+='<div class="'+i[r].classname+'">'+i[r].name+"</div>";o+="</div>"}o+="</div>",o+='<div class="list-item-info">'+n[a].description+"</div>",o+='<div class="list-item-addr">',o+='<div class="addr-left">'+n[a].address+"</div>",o+='<div class="addr-right">',o+='<i class="icon-place"></i>',o+="<span>&lt;"+n[a].distance+"</span>",o+="</div>",o+="</div>",o+='<div class="list-item-review">';for(var s=n[a].star||0,l=5-s,r=1;r<=s;r++)o+='<i class="icon-star active"></i>';for(var r=1;r<=l;r++)o+='<i class="icon-star"></i>';o+="<span>"+n[a].bbs_count+"人评价</span>",o+="</div>",o+="</div>",o+="</div>"}o&&($(".list-group").html(o),e())}}},$.homeData=new t}(),function(){var t=function(){};t.prototype.getCityCode=function(){$.bMap.init(),$.bMap.name(function(t){alert(JSON.stringify(t))})};new t;$.homeIndex=function(){$.app.swipe()}}(),function(){var t=function(){this.foot=$("footer").find(".footer-item"),this.bbs=!0};t.prototype.init=function(){var t=this;t.openFramGroup(),t.listenerFoot(),t.listenerHeaderSwitchEvent()},t.prototype.listenerFoot=function(){var t=this;t.foot.on("click",function(){t.switchFoot($(this))})},t.prototype.openFramGroup=function(){api.openFrameGroup({name:"homeGroup",scrollEnabled:!1,preload:4,index:0,rect:{marginLeft:0,marginRight:0,marginTop:$.api.statusSize(),marginBottom:45},frames:[{name:"homeIndex",url:"widget://html/index.html",bounces:!1,bgColor:"#ededed",vScrollBarEnabled:!1,hScrollBarEnabled:!1},{name:"shopIndex",url:"widget://html/coinShop.html",bounces:!1,bgColor:"#ededed",vScrollBarEnabled:!1,hScrollBarEnabled:!1},{name:"beautyIndex",url:"widget://html/beauty.html",bounces:!1,bgColor:"#ededed",vScrollBarEnabled:!1,hScrollBarEnabled:!1},{name:"bbsIndex",url:"widget://html/bbs.html",bounces:!1,bgColor:"#ededed",vScrollBarEnabled:!1,hScrollBarEnabled:!1},{name:"personalIndex",url:"widget://html/pers.html",bounces:!1,bgColor:"#ededed",vScrollBarEnabled:!1,hScrollBarEnabled:!1}]})},t.prototype.switchFoot=function(t){var e=this,n=t.index();t.addClass("active").siblings().removeClass("active");var o=t.find(".icon");return $.each(e.foot.find(".icon"),function(t,e){$(e).attr("class","icon "+$(e).data("icon"))}),o.attr("class","icon "+o.data("active-icon")),$.api.switchPageIndex("homeGroup",n),3==n?e.openBbsGroup():void $.api.hidePageGroup("bbsGroup")},t.prototype.openBbsGroup=function(){api.openFrameGroup({name:"bbsGroup",scrollEnabled:!0,index:0,rect:{marginLeft:0,marginRight:0,marginTop:$.api.statusSize()+89,marginBottom:45},frames:[{name:"bbs-1",url:"widget://html/bbs/index.html",bounces:!1,bgColor:"#f2f2f2",vScrollBarEnabled:!1,hScrollBarEnabled:!1},{name:"bbs-2",url:"widget://html/bbs/index.html",bounces:!1,bgColor:"#f2f2f2",vScrollBarEnabled:!1,hScrollBarEnabled:!1},{name:"bbs-3",url:"widget://html/bbs/index.html",bounces:!1,bgColor:"#f2f2f2",vScrollBarEnabled:!1,hScrollBarEnabled:!1},{name:"bbs-4",url:"widget://html/bbs/index.html",bounces:!1,bgColor:"#f2f2f2",vScrollBarEnabled:!1,hScrollBarEnabled:!1},{name:"bbs-5",url:"widget://html/bbs/index.html",bounces:!1,bgColor:"#f2f2f2",vScrollBarEnabled:!1,hScrollBarEnabled:!1},{name:"bbs-6",url:"widget://html/bbs/published.html",bounces:!1,bgColor:"#f2f2f2",vScrollBarEnabled:!1,hScrollBarEnabled:!1},{name:"bbs-7",url:"widget://html/bbs/published.html",bounces:!1,bgColor:"#f2f2f2",vScrollBarEnabled:!1,hScrollBarEnabled:!1},{name:"bbs-8",url:"widget://html/bbs/published.html",bounces:!1,bgColor:"#f2f2f2",vScrollBarEnabled:!1,hScrollBarEnabled:!1}]},function(t,e){$.api.sendEvent("bbsSwitchNav",{index:t.index})})},t.prototype.listenerHeaderSwitchEvent=function(){$.api.listenerEvent("bbsSwitchGroup",function(t){$.api.switchPageIndex("bbsGroup",t.index,!0)})},$.home=function(){(new t).init()}}(),function(){$.init=function(){$.main()}}(),function(){var t=function(){this.$container=$(".js-container"),this.$container.on("click","[data-event]",function(){var t=$(this),e=t.data("event"),n=t.data("params")||!1;$.app["switch"](e,n,t)})};t.prototype.home=function(){$.home()},t.prototype.homeIndex=function(){$.homeIndex()},t.prototype.homeCoin=function(){$.app.swipe()},t.prototype.homBeauty=function(){},t.prototype.homeBbs=function(){$.bbs().switchNav()},t.prototype.homePers=function(){},t.prototype.scannerWin=function(){$.scannerWin()},t.prototype.scanner=function(){$.scanner()},t.prototype.beautyHome=function(){$.app.openStoreHeadFrame(api.pageParam.id)},t.prototype.storeInfo=function(){var t=$(".js-container");api.openFrameGroup({name:"storeInfoGroup",scrollEnabled:!0,preload:4,index:0,rect:{marginLeft:0,marginRight:0,marginTop:$.api.statusSize()+t.height(),marginBottom:0},frames:[{name:"storeInfo-1",url:"widget://html/beauty/info.html",bounces:!1,bgColor:"#ededed",vScrollBarEnabled:!1,hScrollBarEnabled:!1},{name:"storeInfo-2",url:"widget://html/beauty/service.html",bounces:!1,bgColor:"#ededed",vScrollBarEnabled:!1,hScrollBarEnabled:!1},{name:"storeInfo-3",url:"widget://html/beauty/benefit.html",bounces:!1,bgColor:"#ededed",vScrollBarEnabled:!1,hScrollBarEnabled:!1},{name:"storeInfo-4",url:"widget://html/beauty/business.html",bounces:!1,bgColor:"#ededed",vScrollBarEnabled:!1,hScrollBarEnabled:!1}]})},t.prototype.url=function(){$.app.openUrlFrame(api.pageParam.url)},t.prototype.detailsWin=function(){$.app.openDetailsHomeFrame(api.pageParam.id||!1)},t.prototype.coinWin=function(){$.app.openCoinDetailsFrame()},t.prototype.myCoin=function(){var t=$.myCoin();t.openFrameGroup(),t.listenerEvent()},t.prototype.myCoinLists=function(){$.myCoin().listsMain(api.pageParam.type)},t.prototype.orderWin=function(){$.app.openCoinOrderDetailsFrame()},t.prototype.coinOrder=function(){$.coinOrder()},t.prototype.chaseWin=function(){$.coinOrder().openChaseLists()};var e=new t,n=$("body").data("main");return $.main=e[n]||function(){}}(),~function(){var t=function(){this.status=$(".js-nav-bar")};return t.prototype.init=function(){},t.prototype.switchMyCoin=function(t){var e=this;t=t||0,$.api.switchPageIndex("my-coin-group",t,!0),e.switchStatus(t)},t.prototype.switchStatus=function(t){this.status.css({left:50*t+"%"})},t.prototype.listenerEvent=function(){var t=this;$.api.listenerEvent("switchMyCoinNavBar",function(e){t.switchStatus(e.index)})},t.prototype.openFrameGroup=function(){api.openFrameGroup({name:"my-coin-group",background:"#f2f2f2",scrollEnabled:!0,rect:{x:0,y:85+$.api.statusSize(),w:"auto",h:"auto"},index:0,frames:[{name:"my-coin-in",url:"widget://html/coinShop/my-coin-lists.html",bgColor:"#f2f2f2",vScrollBarEnabled:!1,hScrollBarEnabled:!1,pageParam:{type:!0}},{name:"my-coin-out",url:"widget://html/coinShop/my-coin-lists.html",bgColor:"#f2f2f2",vScrollBarEnabled:!1,hScrollBarEnabled:!1,pageParam:{type:!1}}]},function(t,e){$.api.sendEvent("switchMyCoinNavBar",{index:t.index})})},t.prototype.listsMain=function(t){},$.myCoin=function(){return new t}}(),function(){var t=function(){this.host="http://api.mlb.kfw001.com/",this.key="!@#kfwljwzhuchaofengyang20160802434"};return t.prototype.getData=function(t){if("object"!=typeof t||!t.url)return $.api.toast("参数错误");t.data=this.getUrlParam(t.data);var e=this.getSign(t.data),n=28800,o=null;"exptime"in t&&(n=t.exptime,delete t.exptime),t.cache&&(o=$.cache.getItme(e)),t.cache&&o?t.success(o,"cache"):(t.data=$.extend({sign:e},t.data),this.ajax(t,function(e){$.cache.setItme(t.data.sign,e,n)}))},t.prototype.getSign=function(t){var e=this.urlString(t)+this.key,n=api.require("signature");return n.md5Sync({data:e})},t.prototype.urlString=function(t){var e="",n=this.sort(t);for(var o in n)e=e+n[o]+"="+$.trim(t[n[o]])+"&";return e.substring(0,e.length-1)},t.prototype.getUrlParam=function(t){var e=this.getBaseParam(),n=$.extend(e,t);return n},t.prototype.ajax=function(t,e){e="function"==typeof e?e:function(t){},t=$.extend({},{url:"",method:"post",data:{},dataType:"json",timeout:5,cache:!0,success:function(t){},error:function(t){}},t),api.ajax({url:this.host+t.url,method:t.method||"post",dataType:t.dataType||"json",cache:t.cache||"true",timeout:5,data:{values:t.data}},function(n,o){return o?alert(JSON.stringify(o)):void(100==n.status?(e(n),t.success(n)):t.error(n))})},t.prototype.sort=function(t){if($.isArray(t))return t.sort();var e=new Array;for(var n in t)e.push(n);return e.sort(),e},t.prototype.getBaseParam=function(){var t={token:localStorage.access_token||0,appid:api.appId||0,deviceId:api.deviceId||0};return t},$.request=new t}($||($={})),function(){var t=function(){};t.prototype.init=function(){$.app.openFNScanner()};var e=new t;$.scannerWin=function(){e.init()}}(),~function(){$.scanner=function(){}}(),function(){$.shoplist=function(){var e=new t;e.loadData()};var t=function(){this.cityid=87,this.end_shopid=0,this.alias={shop:{fn:"listHtml",url:"/shop/index/index"}}};t.prototype.loadData=function(){this.exec("shop",{cityid:this.cityid,shopid:$.cache.getItme("shopidlist")||0})},t.prototype.maxShopId=function(){return this.end_shopid},t.prototype.exec=function(t,e,n,o,a){var i=this.alias[t]||null,r=this[i.fn]||function(t,e){};if(i){var s={url:i.url,data:e||{},exptime:o||100,cache:a||!1,success:function(t){r(t,n)},error:function(t){n()}};$.request.getData(s),n="function"==typeof n?n:function(){},n()}},t.prototype.listHtml=function(t,e){if(e="function"==typeof e?e:function(){},100==t.status){var n=t.data.info,o="";if(n){for(var a in n){o+='<div class="list-item"  data-event="openStoreWin"  data-params="'+n[a].id+'">',o+='<div class="list-item-left">',o+=n[a].thumb?'<img src="'+n[a].thumb+'"  />':'<img src="../images/home-beauty.jpg"  />',o+="</div>",o+='<div class="list-item-right">',o+='<div class="list-item-title">',o+="<span>"+n[a].name+"</span>";var i=n[a].tips||null;for(var r in i)o+='<span class="benefit '+i[r].classname+'">'+i[r].name+"</span>";o+="</div>",o+='<div class="list-item-info">'+n[a].description+"</div>",o+='<div class="list-item-addr">',o+='<div class="addr-left">'+n[a].address+"</div>",o+='<div class="addr-right">',o+='<i class="icon-place"></i>',o+="<span>&lt;"+n[a].distance+"</span>",o+="</div>",o+="</div>",o+='<div class="list-item-review">';for(var s=n[a].star||0,l=5-s,r=1;r<=s;r++)o+='<i class="icon-star"></i>';for(var r=1;r<=l;r++)o+='<i class="icon-star gray"></i>';o+="<span>"+n[a].bbs_count+"人评价</span>",o+="</div>",o+="</div>",o+="</div>"}o&&($(".list-group").html(o),e())}}}}(),~function(){var t=function(t,e,n,o){this.$container,this.title=t,this.text=e,this.callback="function"==typeof n?n:function(){},this.type=o,this.init()};t.prototype.init=function(){var t=this;t.ceater(),t.event()},t.prototype.html=function(){var t=this,e="";return e+='<div class="ui-alert show"><div class="ui-alert-wrap"></div><div class="ui-alert-toast"><div class="ui-alert-title"><div class="ui-alert-title-in">',e+=t.title||"",e+='</div></div><div class="ui-alert-context"><div class="ui-alert-context-in">',e+=t.text||"",e+='</div></div><div class="ui-alert-btn-group">',e+="alert"==t.type?'<div class="ui-alert-btn" data-type="1">确认</div>':'<div class="ui-alert-btn" data-type="0">取消</div><div class="ui-alert-btn" data-type="1">确认</div>',e+="</div></div></div>"},t.prototype.ceater=function(){var t=this;t.$container=document.createElement("div"),t.$container.className="ui-container",t.$container.innerHTML=t.html(),document.body.appendChild(t.$container)},t.prototype.event=function(){for(var t=this,e=t.$container.querySelectorAll(".ui-alert-btn"),n=0;n<e.length;n++)e[n].addEventListener("click",function(){var e=this;t.hide(!!parseInt(e.getAttribute("data-type")))},!1)},t.prototype.hide=function(t){var e=this;e.callback(t),e.$container.parentNode.removeChild(e.$container)},window.alert=function(e,n,o){return new t(e,n,o,"alert")},window.confirm=function(e,n,o){return new t(e,n,o,"confirm")}}(),function(){$.init=function(){$.main()}}();